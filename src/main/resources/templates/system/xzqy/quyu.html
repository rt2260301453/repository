<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<!-- Content Header (Page header) -->
<section class="content-header" style="">
    <h1>
        区域管理
        <small>系统区域管理页面</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> 主页</a></li>
        <li><a href="#">区域管理</a></li>
        <li class="active">系统区域管理</li>
    </ol>
</section>

<section class="content">
    <div class="row">
        <div class="col-xs-12">
            <div class="box">
                <!-- /.box-header -->
                <div class="box-body">
                    <div id="toolbar">
                   <form class="form-inline" id="searchForm">
                            <div class="form-group">
                                    <div>
                                        <select id="province" name="province">

                                        </select>
                                        <select id="city" name="city" >

                                        </select>  
                                        <select id="county" name="qu">

                                        </select>

                                    </div>
                                    <div id="show"></div>
                            </div>
                            <div class="btn-group btn-group-sm">
                                <button type="button" class="btn btn-default" onclick="javascript:$('table').bootstrapTable('refresh', {silent: true});">
                                    <i class="glyphicon glyphicon-search"></i>
                                    查询
                                </button>
                                <button type="reset" class="btn btn-default">
                                    <i class="glyphicon glyphicon-trash"></i>
                                    清空
                                </button>
                            </div>
                        </form>
                        <div class="btn-group btn-group-sm">
                            <button shiro:hasPermission="quyu:query" type="button" id="qryBtn" class="btn btn-default"
                                    data-toggle="modal"
                                    data-target="#qryModal"><i class="glyphicon glyphicon-search"></i> 查询
                            </button>
                            <!-- Provides extra visual weight and identifies the primary action in a set of buttons -->
                            <button shiro:hasPermission="quyu:create" type="button" id="addBtn" class="btn btn-default"
                                    data-toggle="modal"
                                    data-target="#addModal"><i class="glyphicon glyphicon-plus"></i> 新增
                            </button>
                            <!-- Indicates caution should be taken with this action -->
                            <button shiro:hasPermission="quyu:update" type="button" id="editBtn" class="btn btn-default"
                                    data-toggle="modal"
                                    data-target="#editModal"
                                    data-action="{type:'editable',form:'#editForm',table:'#table',after:'editAfter'}"
                                    disabled><i class="glyphicon glyphicon-edit"></i> 修改
                            </button>
                            <!-- Indicates a dangerous or potentially negative action -->
                            <button shiro:hasPermission="quyu:delete" type="button" id="deleteBtn" class="btn btn-default" data-toggle="modal"
                                    data-target="#deleteModal"
                                    data-action="{type:'delete',form:'#deleteForm',idField:'id',table:'#table'}"
                                    disabled><i class="glyphicon glyphicon-remove"></i> 删除
                            </button>
                            <button shiro:hasPermission="quyu:quxiao" type="button" id="quxBtn" class="btn btn-default"
                                    data-toggle="modal"
                                    data-target="#quxryModal"><i class="glyphicon glyphicon-search"></i> 取消
                            </button>
                            <button shiro:hasPermission="quyu:daoru" type="button" id="daoBtn" class="btn btn-default"
                                    data-toggle="modal"
                                    data-target="#daoqryModal"><i class="glyphicon glyphicon-search"></i> 导入
                            </button>
                        </div>
                    </div>
                    <table id="table"></table>
                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->

        </div>
        <!-- /.col -->
    </div>
    <!-- /.row -->
</section>

<!-- /.content -->
<!-- query Modal -->
<!--<div class="modal fade" id="qryModal" tabindex="-1" role="dialog" aria-labelledby="qryModalLabel">-->
    <!--<div class="modal-dialog" role="document">-->
        <!--<div class="modal-content">-->
            <!--<div class="modal-header">-->
                <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>-->
                <!--</button>-->
                <!--<h4 class="modal-title" id="qryModalLabel">查询区域表</h4>-->
            <!--</div>-->
            <!--<div class="modal-body">-->
                <!--<form id="qryForm">-->
                    <!--<div class="info">-->
                        <!--<div>-->
                            <!--<select id="s_province" name="province"></select>-->
                            <!--<select id="s_city" name="city" ></select>  -->
                            <!--<select id="s_county" name="qu"></select>-->

                        <!--</div>-->
                        <!--<div id="show"></div>-->
                    <!--</div>-->


                <!--</form>-->
            <!--</div>-->
            <!--<div class="modal-footer">-->
                <!--<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>-->
                <!--<button type="button" form="qryForm" class="btn btn-primary"-->
                        <!--onclick="javascript:$('table').bootstrapTable('refresh', {silent: true});">-->
                    <!--确定-->
                <!--</button>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->
<!-- add Modal -->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="addModalLabel">添加区域</h4>
            </div>
            <div class="modal-body">
                <form id="addForm">

                    <div class="form-group">
                        <label class="control-label" for="s_province"><span class="asterisk">*</span>省份:</label>
                        <input  type="text" id="s_province" name="province"  class="form-control"></input>

                        <label class="control-label" for="s_city"><span class="asterisk">*</span>城市:</label>
                        <input  type="text" id="s_city" name="city" class="form-control"></input>

                        <label class="control-label" for="s_county"><span class="asterisk">*</span>区(县):</label>
                        <input  type="text" id="s_county" name="qu"  class="form-control"></input>



                    </div>



                    <div class="form-group">
                        <label class="control-label" for="yzbm"><span class="asterisk">*</span>邮政编码:</label>
                        <input type="text" id="yzbm" class="form-control"
                               name="yzbm" placeholder="邮政编码" required>
                       <!-- <div class="help-block with-errors"></div>-->
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="jm"><span class="asterisk">*</span>简码:</label>
                        <input type="text" class="form-control" id="jm" name="jm"  placeholder="请输入简码"
                               required>
                       <!-- <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="csbm"><span class="asterisk">*</span>城市编码:</label>
                        <input type="text" id="csbm" class="form-control"
                               name="csbm" placeholder="城市编码" required>
                       <!-- <div class="help-block with-errors"></div>-->
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="cgdw"><span class="asterisk">*</span>出港单位:</label>
                        <select id="cgdw" class="form-control" name="cgdw"  required>
                            <option id="zong" name="zong">总公司</option>
                            <option id="gong1" name="gong1">公司1</option>
                            <option id="gong2" name="gong2">公司2</option>
                            <option id="gong3" name="gong3">公司3</option>
                            <option id="gong4" name="gong4">公司4</option>
                       <!-- <div class="help-block with-errors"></div>-->
                            </select>
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="jgdw"><span class="asterisk">*</span>进港单位:</label>
                        <input type="text" id="jgdw" class="form-control"
                               name="jgdw" placeholder="进港单位" required>
                      <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="kfwqy"><span class="asterisk">*</span>可服务区域:</label>
                        <input type="text" id="kfwqy" class="form-control"
                               name="kfwqy" placeholder="可服务区域" required>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="bkfwqy"><span class="asterisk">*</span>不可服务区域:</label>
                        <input type="text" id="bkfwqy" class="form-control"
                               name="bkfwqy" placeholder="不可服务区域" required>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="tsqy"><span class="asterisk">*</span>特殊区域:</label>
                        <input type="text" id="tsqy" class="form-control"
                               name="tsqy" placeholder="特殊区域" required>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfkcz"><span class="asterisk">*</span>是否可操作:</label>
                        <select  id="sfkcz" class="form-control"
                               name="sfkcz"  required>
                            <option id="ke" name="ke" value="0">可操作</option>
                            <option id="bk" name="bk" value="1">不可操作</option>
                        </select>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfkczcod"><span class="asterisk">*</span>是否可操作COD:</label>
                        <select  id="sfkczcod" class="form-control"
                                 name="sfkczcod"  required>
                            <option id="kc" name="kc" value="0">可操作</option>
                            <option id="bkc" name="bkc" value="1">不可操作</option>
                        </select>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfww"><span class="asterisk">*</span>是否外网:</label>
                        <select  id="sfww" class="form-control"
                                 name="sfww" required>
                            <option id="shi" name="shi" value="0">是</option>
                            <option id="bs" name="bs" value="1">否</option>
                        </select>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfjqx"><span class="asterisk">*</span>是否郊区县:</label>
                        <select  id="sfjqx" class="form-control"
                                 name="sfjqx"  required>
                            <option id="sq" name="sq" value="0">市区</option>
                            <option id="sj" name="sj" value="1">市郊</option>
                        </select>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="xz"><span class="asterisk">*</span>性质:</label>
                        <select  id="xz" class="form-control"
                                 name="xz"  required>
                            <option id="sji" name="sji" >省级</option>
                            <option id="sxs" name="sj" >市辖市</option>
                            <option id="zxs" name="sq" >直辖市</option>
                            <option id="xj" name="sj" >县级</option>
                            <option id="dj" name="sq" >地级</option>
                            <option id="sh" name="sj" >省会</option>
                        </select>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="ssqy"><span class="asterisk">*</span>所属区域:</label>
                        <select  id="ssqy" class="form-control"
                                 name="ssqy"  required>
                            <option id="dbq" name="dbq" >东北区</option>
                            <option id="hdq" name="hdq" >华东区</option>
                            <option id="hnq" name="hnq" >华南区</option>
                            <option id="xbq" name="xbq" >西北区</option>
                            <option id="hzq" name="hzq" >华中区</option>
                            <option id="xnq" name="xnq" >西南区</option>
                            <option id="hbq" name="hbq" >华北区</option>
                        </select>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="pycsjb"><span class="asterisk">*</span>普运城市级别:</label>
                        <select  id="pycsjb" class="form-control"
                                 name="pycsjb"  required>
                            <option id="sheng" name="sheng" value="1">省级</option>
                            <option id="xian" name="xian" value="2">县级</option>
                            <option id="di" name="di" value="3">地级</option>
                        </select>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sjzxjgczfwq"><span class="asterisk">*</span>手机专项价格操作服务区域:</label>
                        <input type="text" id="sjzxjgczfwq" class="form-control"
                               name="sjzxjgczfwq" placeholder="手机专项价格操作服务区域" required>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="kouan"><span class="asterisk">*</span>口岸:</label>
                        <input type="text" id="kouan" class="form-control"
                               name="kouan" placeholder="口岸" required>
                        <!--  <div class="help-block with-errors"></div>-->
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="submit" form="addForm" class="btn btn-primary"
                        data-action="{type:'submit',form:'#addForm',url:'@{/quyu/create}',after:'$.myAction.refreshTable'}">
                    确定
                </button>
            </div>
        </div>
    </div>
</div>
<!-- edit Modal -->
<div class="modal fade" id="editModal" tabindex="-1" role="dialog" aria-labelledby="editModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title" id="editModalLabel">修改用户</h4>
            </div>
            <div class="modal-body">
                <form id="editForm">

                  <div class="form-group">

                        <input id="s_province1" name="province"  class="form-control"></input>

                        <input id="s_city1" name="city" class="form-control"></input>

                        <input id="s_county1" name="qu"  class="form-control"></input>


                    </div>


                    <div id="show2"></div>
                    <div class="form-group">
                        <label class="control-label" for="yzbm1"><span class="asterisk">*</span>邮政编码:</label>
                        <input type="text" id="yzbm1" class="form-control"
                               name="yzbm" placeholder="邮政编码" required>
                        &lt;!&ndash; <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="jm1"><span class="asterisk">*</span>简码:</label>
                        <input type="text" class="form-control" id="jm1" name="jm"  placeholder="请输入简码"
                               required>
                        &lt;!&ndash; <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="csbm1"><span class="asterisk">*</span>城市编码:</label>
                        <input type="text" id="csbm1" class="form-control"
                               name="csbm" placeholder="城市编码" required>
                        &lt;!&ndash; <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>

                    <div class="form-group">
                        <label class="control-label" for="cgdw1"><span class="asterisk">*</span>出港单位:</label>
                        <select id="cgdw1" class="form-control" name="cgdw"  required>
                            <option id="zong1" name="zong">总公司</option>
                            <option id="gong11" name="gong1">公司1</option>
                            <option id="gong21" name="gong2">公司2</option>
                            <option id="gong31" name="gong3">公司3</option>
                            <option id="gong41" name="gong4">公司4</option>
                            &lt;!&ndash; <div class="help-block with-errors"></div>&ndash;&gt;
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="jgdw1"><span class="asterisk">*</span>进港单位:</label>
                        <input type="text" id="jgdw1" class="form-control"
                               name="jgdw" placeholder="进港单位" required>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="kfwqy1"><span class="asterisk">*</span>可服务区域:</label>
                        <input type="text" id="kfwqy1" class="form-control"
                               name="kfwqy" placeholder="可服务区域" required>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="bkfwqy1"><span class="asterisk">*</span>不可服务区域:</label>
                        <input type="text" id="bkfwqy1" class="form-control"
                               name="bkfwqy" placeholder="不可服务区域" required>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="tsqy1"><span class="asterisk">*</span>特殊区域:</label>
                        <input type="text" id="tsqy1" class="form-control"
                               name="tsqy" placeholder="特殊区域" required>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfkcz1"><span class="asterisk">*</span>是否可操作:</label>
                        <select  id="sfkcz1" class="form-control"
                                 name="sfkcz"  required>
                            <option id="ke1" name="ke" value="0">可操作</option>
                            <option id="bk1" name="bk" value="1">不可操作</option>
                        </select>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfkczCOD1"><span class="asterisk">*</span>是否可操作COD:</label>
                        <select  id="sfkczCOD1" class="form-control"
                                 name="sfkczCOD"  required>
                            <option id="kc1" name="kc" value="0">可操作</option>
                            <option id="bkc1" name="bkc" value="1">不可操作</option>
                        </select>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfww1"><span class="asterisk">*</span>是否外网:</label>
                        <select  id="sfww1" class="form-control"
                                 name="sfww"  required>
                            <option id="shi1" name="shi" value="0">是</option>
                            <option id="bs1" name="bs" value="1">否</option>
                        </select>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sfjqx1"><span class="asterisk">*</span>是否郊区县:</label>
                        <select  id="sfjqx1" class="form-control"
                                 name="sfjqx"  required>
                            <option id="sq1" name="sq" value="0">市区</option>
                            <option id="sj1" name="sj" value="1">市郊</option>
                        </select>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="xz1"><span class="asterisk">*</span>性质:</label>
                        <select  id="xz1" class="form-control"
                                 name="xz"  required>
                            <option id="sji1" name="sji" >省级</option>
                            <option id="sxs1" name="sj" >市辖市</option>
                            <option id="zxs1" name="sq" >直辖市</option>
                            <option id="xj1" name="sj" >县级</option>
                            <option id="dj1" name="sq" >地级</option>
                            <option id="sh1" name="sj" >省会</option>
                        </select>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="ssqy1"><span class="asterisk">*</span>所属区域:</label>
                        <select  id="ssqy1" class="form-control"
                                 name="ssqy"  required>
                            <option id="dbq1" name="dbq" >东北区</option>
                            <option id="hdq1" name="hdq" >华东区</option>
                            <option id="hnq1" name="hnq" >华南区</option>
                            <option id="xbq1" name="xbq" >西北区</option>
                            <option id="hzq1" name="hzq" >华中区</option>
                            <option id="xnq1" name="xnq" >西南区</option>
                            <option id="hbq1" name="hbq" >华北区</option>
                        </select>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="pycsjb1"><span class="asterisk">*</span>普运城市级别:</label>
                        <select  id="pycsjb1" class="form-control"
                                 name="pycsjb"  required>
                            <option id="sheng1" name="sheng" value="1">省级</option>
                            <option id="xian1" name="xian" value="2">县级</option>
                            <option id="di1" name="di" value="3">地级</option>
                        </select>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="sjzxjgczfwq1"><span class="asterisk">*</span>手机专项价格操作服务区域:</label>
                        <input type="text" id="sjzxjgczfwq1" class="form-control"
                               name="sjzxjgczfwq" placeholder="手机专项价格操作服务区域" required>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>
                    <div class="form-group">
                        <label class="control-label" for="ka1"><span class="asterisk">*</span>口岸:</label>
                        <input type="text" id="ka1" class="form-control"
                               name="ka" placeholder="口岸" required>
                        &lt;!&ndash;  <div class="help-block with-errors"></div>&ndash;&gt;
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="submit" form="editForm" class="btn btn-primary"
                        data-action="{type:'submit',form:'#editForm',url:'@{/quyu/update}',after:'$.myAction.refreshTable'}">
                    确定
                </button>
            </div>
        </div>
    </div>
</div>

<!-- delete modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteSmallModalLabel">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="deleteSmallModalLabel">删除用户</h4>
            </div>
            <div class="modal-body">
                <form id="deleteForm"></form>
                确定要删除选中的 <span class="records"></span> 条记录?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" form="deleteForm" class="btn btn-primary"
                        data-action="{type:'submit',form:'#deleteForm',url:'@{/quyu/delete}',after:'$.myAction.refreshTable'}">
                    确定
                </button>
            </div>
        </div>
    </div>
</div>
<div id="actionButtons" class="admin-hide">
    <a class="like" href="javascript:void(0)" data-toggle="tooltip" title="Like"><i class="glyphicon glyphicon-heart"></i></a>　
    <a shiro:hasPermission="quyu:update" class="edit ml10" href="javascript:void(0)" data-toggle="tooltip" title="编辑"><i class="glyphicon glyphicon-edit"></i></a>　
    <a shiro:hasPermission="quyu:delete" class="remove ml10" href="javascript:void(0)" data-toggle="tooltip" title="删除"><i class="glyphicon glyphicon-remove"></i></a>　
</div>
<!-- zTree -->
<div id="menuContent" class="menuContent"
     style="display:none;z-index:1989101600;position: absolute;border: 1px solid #ccc; background-color: #fff;">
    <ul id="tree" class="ztree"></ul>
</div>
<style type="text/css">
    body{ background:#EEEEEE;margin:0; padding:0; font-family:"微软雅黑", Arial, Helvetica, sans-serif; }
    a{ color:#006600; text-decoration:none;}
    a:hover{color:#990000;}
    .top{ margin:5px auto; color:#990000; text-align:center;}
    .info select{ border:2px #993300 solid; background:#EEEEEE;}
    .info{ margin:5px; text-align:center;}
    .info #show{ color:#3399FF; }
    .bottom{ text-align:right; font-size:12px; color:#CCCCCC; width:1000px;}
</style>


<script type="text/javascript">_init_area();</script>
<script type="text/javascript">
    window.onload=function(){
        // var Gid  = document.getElementsByClassName ;
        // var showArea = function(){
        //     Gid('show').innerHTML = "<h3>省" + Gid('s_province').value + " - 市" +
        //         Gid('s_city').value + " - 县/区" +
        //         Gid('s_county').value + "</h3>"
        //     Gid('show1').innerHTML = "<h3>省" + Gid('s_province').value + " - 市" +
        //         Gid('s_city').value + " - 县/区" +
        //         Gid('s_county').value + "</h3>"
        // }
        // Gid('s_county').setAttribute('onchange','showArea()');



    }


</script>


<script th:inline="javascript">

    var $table = $('#table');

    $(function () {
        // bootstrap table初始化
        // http://bootstrap-table.wenzhixin.net.cn/zh-cn/documentation/
        $table.bootstrapTable({
            url: CONTEXT_PATH + '/quyu/list',
            idField: 'id',
            columns: [
                {field: 'state', checkbox: true},
                {field: 'id', title: 'id', sortable: true, halign: 'left'},
                {field: 'province', title: '省', sortable: true, halign: 'left'},
                {field: 'city', title: '城市', sortable: true, halign: 'left'},
                {field: 'qu', title: '区(县)', sortable: true, halign: 'left'},
                {field: 'yzbm', title: '邮政编码', sortable: true, halign: 'left'},
                {field: 'jm', title: '简码', sortable: true, halign: 'left'},
                {field: 'csbm', title: '城市编码', sortable: true, halign: 'left'},
                {field: 'cgdw', title: '出港单位', sortable: true, halign: 'left'},
                {field: 'jgdw', title: '进港单位', sortable: true, halign: 'left'},

            {
                    field: 'action',
                    title: '操作',
                    halign: 'center',
                    align: 'center',
                    formatter: 'actionFormatter',
                    events: 'actionEvents',
                    clickToSelect: false
                }
            ]
        });
    });

    // 数据表格展开内容
    function detailFormatter(index, row) {
        var html = [];
        $.each(row, function (key, value) {
            html.push('<p><b>' + key + ':</b> ' + value + '</p>');
        });
        return html.join('');
    }

    function editAfter(obj, row) {
        var roleIdList = row.roleIdList;
        var groupIdList = row.groupIdList;
        for (i in roleIdList) {
            var roleId = roleIdList[i];
            $('#editForm').find('[name=roleIds]').find('option[value=' + roleId + ']').prop('selected', true);
        }
        for(i in groupIdList) {
            var groupId = groupIdList[i];
            $('#editForm').find('[name=groupIds]').find('option[value=' + groupId + ']').prop('selected', true);
        }
    }

    function actionFormatter(value, row, index) {
        return $('#actionButtons').html();
    }

    window.actionEvents = {
        'click .like': function (e, value, row, index) {
            alert('You click like icon, row: ' + JSON.stringify(row));
            console.log(value, row, index);
        },
        'click .edit': function (e, value, row, index) {
            $('#editModal').modal('show')
            $('#editForm').fillForm(row);
            editAfter('', row);
            console.log(value, row, index);
        },
        'click .remove': function (e, value, row, index) {
            $('#deleteModal').modal('show');
            $('.records').html('1');
            var html = '';
            for (var key in row) {
                html += '<input type="hidden" name="' + key + '" value="' + row[key] + '">';
            }
            $('#deleteForm').html(html);
        }
    };

    var setting = {
        view: {
            dblClickExpand: false
        },
        data: {
            simpleData: {
                enable: true
            }
        },
        callback: {
            onClick: onClick
        }
    };
    var orgList = [[${organizationList}]];
    var zNodes = [];
    for (var i in orgList) {
        zNodes.push({id: orgList[i].id, pId: orgList[i].parentId, name: orgList[i].name});
    }

    function onClick(e, treeId, treeNode) {
        var zTree = $.fn.zTree.getZTreeObj("tree"),
            nodes = zTree.getSelectedNodes(),
            id = "",
            name = "";
        nodes.sort(function compare(a, b) {
            return a.id - b.id;
        });
        for (var i = 0, l = nodes.length; i < l; i++) {
            id += nodes[i].id + ",";
            name += nodes[i].name + ",";
        }
        if (id.length > 0) id = id.substring(0, id.length - 1);
        if (name.length > 0) name = name.substring(0, name.length - 1);
        $("#organizationId").val(id);
        $("#organizationName").val(name);
        $("#editOrganizationId").val(id);
        $("#editOrganizationName").val(name);
        hideMenu();
    }

    function showMenu() {
        var cityObj = $("#organizationName");
        var cityOffset = $("#organizationName").offset();
        $("#menuContent").css({
            left: cityOffset.left + "px",
            top: cityOffset.top + cityObj.outerHeight()
        }).slideDown("fast");

        $("body").bind("mousedown", onBodyDown);
    }

    function showMenuOfEdit() {
        var cityObj = $("#editOrganizationName");
        var cityOffset = $("#editOrganizationName").offset();
        $("#menuContent").css({
            left: cityOffset.left + "px",
            top: cityOffset.top + cityObj.outerHeight()
        }).slideDown("fast");

        $("body").bind("mousedown", onBodyDown);
    }

    function hideMenu() {
        $("#menuContent").fadeOut("fast");
        $("body").unbind("mousedown", onBodyDown);
    }

    function onBodyDown(event) {
        if (!(event.target.id == "organizationName" || event.target.id == "menuContent" || $(event.target).parents("#menuContent").length > 0)) {
            hideMenu();
        }
    }

    $.fn.zTree.init($("#tree"), setting, zNodes);
    $("#organizationName").click(showMenu);
    $("#editOrganizationName").click(showMenuOfEdit);
</script>
</html>